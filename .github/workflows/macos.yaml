name: MacOS

on: [push]

# cp utils/macos/build_app.sh build_wl/

jobs:
  macos:
    runs-on: macOS-latest
    steps:
    - name: Installing dependencies
      run: |
        export ICU_ROOT="$(brew --prefix icu4c)" && \
        export PATH="/usr/local/opt/ccache/libexec:/usr/local/opt/gettext/bin:$PATH";
        brew install gcc@7
        brew install boost ccache doxygen gcc glew graphviz ninja sdl2 sdl2_image sdl2_mixer sdl2_ttf
    - name: Checkout
      uses: actions/checkout@v2
      with:
        fetch-depth: 1
    - name: Build
      run: |
        mkdir build_wl
        pwd
        ls
        cd build_wl/
        pwd
        ls
        ../utils/build_app.sh gcc release ../widelands/
